<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will you be my Valentine?</title>
    <style>
        :root {
            --pink-100: #ffe6ef;
            --pink-200: #ffc4dd;
            --pink-300: #ff9cc6;
            --pink-400: #ff6fae;
            --pink-500: #e91e63;
            --purple-500: #a64dff;
            --gold-300: #ffd1a6;
            --card-glow: rgba(255, 255, 255, 0.75);
            --text-dark: #2d2a32;
        }

        * {
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 32px 16px 40px;
            background: radial-gradient(circle at top, #fff6fb 0%, #fde9ff 32%, #ffd6ea 68%, #ffcade 100%);
            font-family: 'Poppins', 'Arial', sans-serif;
            overflow-x: hidden;
            overflow-y: auto;
            color: var(--text-dark);
        }

        body::before,
        body::after {
            content: "";
            position: absolute;
            width: 420px;
            height: 420px;
            border-radius: 50%;
            filter: blur(0px);
            opacity: 0.5;
            z-index: 0;
        }

        body::before {
            top: -140px;
            left: -120px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(255, 182, 193, 0));
            animation: floatGlow 12s ease-in-out infinite;
        }

        body::after {
            bottom: -160px;
            right: -90px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.6), rgba(221, 182, 255, 0));
            animation: floatGlow 14s ease-in-out infinite reverse;
        }

        .container {
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.82);
            padding: 38px 40px;
            border-radius: 28px;
            text-align: center;
            max-width: 540px;
            width: min(92vw, 540px);
            box-shadow: 0 30px 60px rgba(233, 30, 99, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            animation: cardRise 0.9s ease, softFloat 6s ease-in-out infinite;
            transition: transform 0.35s ease, box-shadow 0.35s ease;
        }

        .container::before {
            content: "";
            position: absolute;
            inset: -2px;
            border-radius: 30px;
            padding: 2px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 182, 193, 0.7), rgba(166, 77, 255, 0.6));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.75;
            pointer-events: none;
            animation: borderGlow 6s ease-in-out infinite;
        }

        .container:hover {
            transform: translateY(-4px);
            box-shadow: 0 40px 70px rgba(233, 30, 99, 0.26);
        }

        #display-image {
            width: clamp(160px, 40vw, 220px);
            border-radius: 15px;
            margin-bottom: 18px;
            box-shadow: 0 16px 30px rgba(233, 30, 99, 0.2);
            animation: floaty 4.5s ease-in-out infinite, glowPulse 4s ease-in-out infinite;
            transition: transform 0.35s ease, box-shadow 0.35s ease;
        }

        #display-image:hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 20px 36px rgba(233, 30, 99, 0.28);
        }

        h1 {
            font-size: clamp(1.85rem, 4.8vw, 2.4rem);
            color: var(--text-dark);
            margin: 0 0 8px;
            text-shadow: 0 2px 6px rgba(233, 30, 99, 0.15);
        }

        .subtitle {
            font-size: clamp(0.98rem, 2.6vw, 1.05rem);
            color: #6d5d6f;
            margin: 0 0 20px;
        }

        .love-note {
            font-size: clamp(0.98rem, 2.6vw, 1.05rem);
            line-height: 1.55;
            background: linear-gradient(135deg, rgba(255, 245, 248, 0.95), rgba(255, 233, 245, 0.75));
            border-radius: 18px;
            padding: 16px 18px;
            margin: 14px 0 18px;
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.7);
        }

        .day-highlight {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 18px;
            padding: 16px 18px;
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 10px 20px rgba(233, 30, 99, 0.12);
        }

        .day-label {
            margin: 0;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #8a6e85;
        }

        #day-title {
            margin: 6px 0 8px;
            font-size: clamp(1.35rem, 3.6vw, 1.7rem);
            color: #b21856;
        }

        .day-message {
            margin: 0 0 10px;
            font-size: 1rem;
            color: #5f4a60;
        }

        .day-extra {
            margin: 10px 0 12px;
            padding: 12px 14px;
            background: linear-gradient(135deg, rgba(255, 238, 246, 0.8), rgba(255, 248, 252, 0.9));
            border-radius: 14px;
            color: #66465f;
            font-size: 0.98rem;
        }

        .day-extra ul {
            margin: 8px 0 0 18px;
            padding: 0;
        }

        .day-reminder {
            margin: 0;
            font-weight: 600;
            color: #9a4f74;
        }

        .season-note {
            margin: 10px 0 0;
            font-size: 0.95rem;
            color: #7b5b72;
            font-style: italic;
        }

        .day-pages {
            margin-top: 20px;
            text-align: left;
        }

        .content-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 6px;
            margin-bottom: 12px;
            scrollbar-width: thin;
        }

        .content-tab {
            border: 1px solid rgba(233, 30, 99, 0.2);
            background: #fff8fb;
            color: #7a3f5f;
            border-radius: 999px;
            padding: 6px 12px;
            font-size: 0.85rem;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .content-tab.active {
            background: linear-gradient(135deg, #ff8fbf, #d16bff);
            color: white;
            border-color: transparent;
            box-shadow: 0 8px 18px rgba(233, 30, 99, 0.25);
        }

        .page-content {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 18px;
            box-shadow: 0 12px 24px rgba(233, 30, 99, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .page-content.animate {
            animation: fadeSlide 0.45s ease;
        }

        .page-title {
            margin: 0 0 10px;
            font-size: 1.15rem;
            color: #7a2e56;
        }

        .question-list {
            margin: 0 0 12px 18px;
            color: #5f4a60;
        }

        .choice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-bottom: 12px;
        }

        .choice-button {
            border: 1px solid rgba(233, 30, 99, 0.2);
            background: #fff4fb;
            color: #6b3a59;
            border-radius: 14px;
            padding: 10px 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .choice-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 18px rgba(233, 30, 99, 0.18);
        }

        .choice-button.selected {
            background: linear-gradient(135deg, #ff8fbf, #d16bff);
            color: #fff;
            border-color: transparent;
        }

        .love-letter {
            background: linear-gradient(135deg, rgba(255, 235, 245, 0.9), rgba(255, 250, 252, 0.95));
            border-radius: 16px;
            padding: 14px 16px;
            font-size: 0.98rem;
            color: #5c3f55;
            line-height: 1.5;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.7);
        }

        .letter-card {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .letter-seal {
            border: none;
            border-radius: 18px;
            padding: 18px 20px;
            background: linear-gradient(135deg, rgba(255, 231, 245, 0.95), rgba(255, 247, 252, 0.98));
            box-shadow: 0 12px 26px rgba(233, 30, 99, 0.18);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            text-align: center;
        }

        .letter-seal::before,
        .letter-seal::after {
            content: "";
            position: absolute;
            width: 70%;
            height: 2px;
            background: rgba(233, 30, 99, 0.18);
            border-radius: 999px;
        }

        .letter-seal::before {
            top: 18px;
        }

        .letter-seal::after {
            bottom: 18px;
        }

        .letter-seal:hover {
            transform: translateY(-2px);
            box-shadow: 0 16px 30px rgba(233, 30, 99, 0.22);
        }

        .letter-seal.opened {
            background: linear-gradient(135deg, rgba(255, 214, 234, 0.9), rgba(255, 246, 252, 0.95));
        }

        .letter-icon {
            font-size: 2.2rem;
        }

        .letter-title {
            font-weight: 600;
            color: #7a2e56;
            font-size: 1rem;
        }

        .letter-subtitle {
            font-size: 0.92rem;
            color: #7b5b72;
        }

        .page-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
            color: #8a5c78;
            font-size: 0.9rem;
        }

        .buttons {
            margin-top: 26px;
            display: flex;
            justify-content: center;
            gap: 20px;
            min-height: 50px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 30px;
            font-size: clamp(1.05rem, 3.5vw, 1.2rem);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.3s ease, letter-spacing 0.3s ease;
            font-weight: 600;
            min-width: 140px;
            min-height: 48px;
        }

        #yes-btn {
            background: linear-gradient(135deg, var(--pink-500), var(--purple-500), #ff7bbf);
            color: white;
            box-shadow: 0 16px 24px rgba(233, 30, 99, 0.35);
            position: relative;
            overflow: hidden;
            background-size: 200% 200%;
            animation: heartbeat 2.6s ease-in-out infinite, gradientShift 6s ease-in-out infinite;
        }

        #yes-btn::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(120deg, rgba(255, 255, 255, 0) 30%, rgba(255, 255, 255, 0.4) 50%, rgba(255, 255, 255, 0) 70%);
            transform: translateX(-120%);
            transition: transform 0.6s ease;
        }

        #no-btn {
            background-color: #fff7fb;
            color: #5a425f;
            box-shadow: 0 10px 18px rgba(0,0,0,0.12);
        }

        #yes-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 20px 32px rgba(233, 30, 99, 0.4);
            letter-spacing: 0.5px;
        }

        #yes-btn:hover::after {
            transform: translateX(120%);
        }

        #no-btn:hover {
            transform: translateY(-2px);
            animation: wiggle 0.4s ease-in-out;
        }

        button:active {
            transform: translateY(1px) scale(0.98);
        }

        .signature {
            margin-top: 24px;
            font-size: 1rem;
            color: #6d5d6f;
        }

        /* Success Message Styling */
        .success-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: fadeIn 0.5s ease-in;
        }

        .success-content p {
            font-size: 1.5rem;
            margin: 10px 0;
        }

        .success-content img {
            width: min(250px, 80vw);
            height: auto;
        }

        .success-content .final-note {
            font-size: 1.05rem;
            margin-top: 6px;
        }

        .success-title {
            margin: 0 0 8px;
            font-size: clamp(1.6rem, 4.2vw, 2.2rem);
            color: #b21856;
        }

        .success-subtitle {
            margin: 0 0 16px;
            font-size: 1.05rem;
            color: #6b3a59;
        }

        .success-message {
            font-size: 1.05rem;
            line-height: 1.55;
            color: #5c3f55;
            background: linear-gradient(135deg, rgba(255, 245, 250, 0.95), rgba(255, 233, 247, 0.85));
            border-radius: 16px;
            padding: 14px 16px;
            margin-bottom: 16px;
            box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.7);
        }

        .success-questions {
            text-align: left;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            padding: 14px 16px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 10px 20px rgba(233, 30, 99, 0.12);
            margin-bottom: 16px;
        }

        .success-questions h3,
        .success-letters h3 {
            margin: 0 0 10px;
            font-size: 1.1rem;
            color: #7a2e56;
        }

        .success-letters {
            text-align: left;
            background: rgba(255, 255, 255, 0.92);
            border-radius: 16px;
            padding: 14px 16px;
            border: 1px solid rgba(255, 255, 255, 0.85);
            box-shadow: 0 10px 20px rgba(233, 30, 99, 0.12);
        }

        .success-letters ul,
        .success-questions ul {
            margin: 0;
            padding-left: 18px;
            color: #5f4a60;
        }

        .success-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 16px;
        }

        .success-actions .choice-button {
            padding: 10px 18px;
        }

        .loading-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            padding: 12px 0;
            animation: fadeIn 0.6s ease;
        }

        .initial-loading-overlay {
            position: fixed;
            inset: 0;
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
            background: radial-gradient(circle at top, rgba(255, 246, 251, 0.97) 0%, rgba(253, 233, 255, 0.95) 32%, rgba(255, 214, 234, 0.92) 68%, rgba(255, 202, 222, 0.9) 100%);
            backdrop-filter: blur(6px);
        }

        .loading-title {
            margin: 0;
            font-size: clamp(1.5rem, 4vw, 2rem);
            color: #b21856;
        }

        .loading-icon {
            font-size: clamp(2.2rem, 6vw, 3rem);
        }

        .loading-heart {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: clamp(2.2rem, 6vw, 3rem);
            animation: heartbeat 1.6s ease-in-out infinite;
        }

        .loading-subtitle {
            margin: 0;
            font-size: 1rem;
            color: #6b3a59;
        }

        .loading-theme {
            margin: 0;
            font-size: 0.95rem;
            color: #8a5c78;
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        .petal-field {
            position: relative;
            width: min(260px, 80vw);
            height: 140px;
            margin-top: 6px;
            overflow: hidden;
            border-radius: 16px;
            background: linear-gradient(135deg, rgba(255, 240, 247, 0.95), rgba(255, 214, 234, 0.85));
            box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.7);
        }

        .petal {
            position: absolute;
            top: -20px;
            font-size: 1.2rem;
            opacity: 0;
            animation: petalFall 2s ease-in-out forwards;
        }

        .rose-display {
            display: grid;
            place-items: center;
            gap: 10px;
            margin-top: 4px;
        }

        .rose-bloom {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            font-size: 1.6rem;
        }

        .rose-stem {
            font-size: 1.4rem;
        }

        .proposal-display,
        .hug-display,
        .kiss-display,
        .valentine-display {
            display: grid;
            place-items: center;
            gap: 10px;
            margin-top: 4px;
        }

        .proposal-ring {
            display: grid;
            place-items: center;
            width: 80px;
            height: 80px;
            border-radius: 999px;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.95), rgba(255, 214, 234, 0.9));
            border: 2px solid rgba(255, 143, 191, 0.6);
            box-shadow: 0 12px 20px rgba(233, 30, 99, 0.18);
            font-size: 1.8rem;
        }

        .proposal-sparkles {
            display: flex;
            gap: 6px;
            font-size: 1.2rem;
        }

        .hug-cloud {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.85);
            box-shadow: 0 10px 18px rgba(233, 30, 99, 0.12);
            font-size: 1.4rem;
        }

        .hug-hearts,
        .kiss-sparkles,
        .valentine-fireworks {
            display: flex;
            gap: 6px;
            font-size: 1.2rem;
        }

        .kiss-lips {
            font-size: 2rem;
            letter-spacing: 6px;
        }

        .valentine-heart {
            font-size: 2rem;
        }

        .floating-hearts {
            position: absolute;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .burst-heart {
            position: absolute;
            font-size: 22px;
            opacity: 0;
            animation: burst 1.2s ease-out forwards;
            pointer-events: none;
        }

        .floating-hearts span {
            position: absolute;
            bottom: -50px;
            font-size: 18px;
            opacity: 0.7;
            animation: heartsUp 10s linear infinite;
        }

        .floating-hearts span:nth-child(2) { left: 15%; animation-delay: 1s; font-size: 22px; }
        .floating-hearts span:nth-child(3) { left: 30%; animation-delay: 3s; font-size: 16px; }
        .floating-hearts span:nth-child(4) { left: 45%; animation-delay: 2s; font-size: 20px; }
        .floating-hearts span:nth-child(5) { left: 60%; animation-delay: 4s; font-size: 24px; }
        .floating-hearts span:nth-child(6) { left: 75%; animation-delay: 1.5s; font-size: 18px; }
        .floating-hearts span:nth-child(7) { left: 85%; animation-delay: 2.7s; font-size: 20px; }

        @keyframes floaty {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-12px); }
        }

        @keyframes softFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-6px); }
        }

        @keyframes cardRise {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes heartsUp {
            0% { transform: translateY(0) scale(1); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translateY(-120vh) scale(1.2); opacity: 0; }
        }

        @keyframes floatGlow {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(25px); }
        }

        @keyframes borderGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.9; }
        }

        @keyframes wiggle {
            0% { transform: translateY(-2px) rotate(0deg); }
            25% { transform: translateY(-2px) rotate(2deg); }
            50% { transform: translateY(-2px) rotate(-2deg); }
            75% { transform: translateY(-2px) rotate(1deg); }
            100% { transform: translateY(-2px) rotate(0deg); }
        }

        @keyframes heartbeat {
            0%, 100% { transform: translateY(0) scale(1); }
            40% { transform: translateY(-2px) scale(1.03); }
            70% { transform: translateY(0) scale(0.98); }
        }

        @keyframes glowPulse {
            0%, 100% { box-shadow: 0 16px 30px rgba(233, 30, 99, 0.2); }
            50% { box-shadow: 0 20px 36px rgba(233, 30, 99, 0.28); }
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes burst {
            0% { transform: translate(0, 0) scale(0.5); opacity: 0; }
            30% { opacity: 1; }
            100% { transform: translate(var(--x, 0), var(--y, -80px)) scale(1.2); opacity: 0; }
        }

        @keyframes fadeSlide {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes petalFall {
            0% { transform: translateY(0) rotate(0deg) scale(0.9); opacity: 0; }
            20% { opacity: 0.9; }
            100% { transform: translateY(160px) rotate(120deg) scale(1.1); opacity: 0; }
        }

        @media (max-width: 600px) {
            body {
                padding: 24px 12px 32px;
            }

            .container {
                padding: 28px 22px;
                border-radius: 22px;
            }

            .buttons {
                flex-direction: column;
                gap: 12px;
            }

            button {
                width: 100%;
            }

            .content-tabs {
                justify-content: flex-start;
            }
        }

        @media (max-height: 700px) {
            .container {
                padding: 24px 20px;
            }

            .love-note {
                padding: 14px 16px;
            }
        }

        @media (hover: none) {
            #yes-btn:hover,
            #no-btn:hover,
            #display-image:hover,
            .container:hover {
                transform: none;
                animation: none;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="floating-hearts" aria-hidden="true">
        <span style="left: 5%;">üíó</span>
        <span>üíñ</span>
        <span>üíû</span>
        <span>üíò</span>
        <span>üíì</span>
        <span>üíù</span>
        <span>üíï</span>
    </div>
    <div class="container" id="main-card">
        <div id="content-wrapper">
            <img id="display-image" src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExazh3a3piZzdoYThkaTJpY3p4ZGJ3ajVlMDYzNmVldndmY3drZ3FsYSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/VQRPENY0Tm2puBhvYz/giphy.gif" alt="Today's love scene">
            <h1 id="question">Sindhu, will you be my Valentine?</h1>
            <p class="subtitle">A soft moment, a brave question, and a forever kind of yes.</p>
            <div class="love-note">
                You make everything feel lighter, sweeter, and brighter. I‚Äôd love to spend this Valentine‚Äôs Day
                laughing, cuddling, and making new memories that feel like home.
            </div>
            <div class="day-highlight">
                <p class="day-label" id="day-label">Today is</p>
                <h2 id="day-title">Rose Day üåπ</h2>
                <p class="day-message" id="day-message">
                    Let me shower you with roses and remind you how wildly beautiful love can be.
                </p>
                <div class="day-extra" id="day-extra"></div>
                <p class="day-reminder" id="day-reminder">Come back tomorrow for a brand-new love surprise. üíû</p>
                <p class="season-note" id="season-note" hidden></p>
            </div>
            <div class="day-pages">
                <div class="content-tabs" id="content-tabs" aria-label="Today's love tabs"></div>
                <div class="page-content" id="page-content">
                    <h3 class="page-title" id="page-title">Rose Day Love Page</h3>
                    <div id="page-body"></div>
                    <div class="page-footer">
                        <span id="page-count">Today‚Äôs page</span>
                        <span id="today-badge">Today‚Äôs pick üíñ</span>
                    </div>
                </div>
            </div>
            <div class="buttons" id="button-group">
                <button id="yes-btn">Yes</button>
                <button id="no-btn">No</button>
            </div>
           <p class="signature">
            With love, <strong>Chandu ‚ù§Ô∏è</strong>
        </p>
        </div>
    </div>

    <script>
        const noBtn = document.getElementById('no-btn');
        const yesBtn = document.getElementById('yes-btn');
        const container = document.getElementById('content-wrapper');
        const dayLabel = document.getElementById('day-label');
        const dayTitle = document.getElementById('day-title');
        const dayMessage = document.getElementById('day-message');
        const dayExtra = document.getElementById('day-extra');
        const dayReminder = document.getElementById('day-reminder');
        const seasonNote = document.getElementById('season-note');
        const contentTabs = document.getElementById('content-tabs');
        const pageContent = document.getElementById('page-content');
        const pageTitle = document.getElementById('page-title');
        const pageBody = document.getElementById('page-body');
        const pageCount = document.getElementById('page-count');
        const todayBadge = document.getElementById('today-badge');

        const createFallbackImage = (label) => {
            const safeLabel = label || 'Love note';
            const svg = `
                <svg xmlns="http://www.w3.org/2000/svg" width="320" height="240" viewBox="0 0 320 240">
                    <defs>
                        <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
                            <stop offset="0%" stop-color="#ffe6ef"/>
                            <stop offset="100%" stop-color="#ffd1f0"/>
                        </linearGradient>
                    </defs>
                    <rect width="320" height="240" rx="24" fill="url(#bg)"/>
                    <text x="50%" y="46%" text-anchor="middle" font-size="56">üíñ</text>
                    <text x="50%" y="66%" text-anchor="middle" font-family="Poppins, Arial, sans-serif" font-size="16" fill="#b21856">
                        ${safeLabel}
                    </text>
                    <text x="50%" y="78%" text-anchor="middle" font-family="Poppins, Arial, sans-serif" font-size="12" fill="#6b3a59">
                        Image unavailable
                    </text>
                </svg>
            `;

            return `data:image/svg+xml;utf8,${encodeURIComponent(svg)}`;
        };

        const setImageWithFallback = (imageEl, src, altText, label) => {
            if (!imageEl) {
                return;
            }

            imageEl.alt = altText || label || 'Love note image';
            imageEl.src = src;
            imageEl.onerror = () => {
                imageEl.onerror = null;
                imageEl.src = createFallbackImage(label);
            };
        };

        const valentineWeek = [
            {
                month: 1,
                day: 7,
                title: 'Rose Day üåπ',
                image: {
                    src: 'https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif',
                    alt: 'A bouquet of roses glowing with love'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/3o6Zt6ML6BklcajjsA/giphy.gif',
                    alt: 'A rose-filled celebration for a sweet yes'
                },
                loading: {
                    title: 'Preparing your rose surprise...',
                    icon: 'üåπüíûüåπ',
                    petals: 'üåπ'
                },
                message: 'A single rose can say ‚ÄúI adore you,‚Äù but I want to give you a whole garden of care.',
                proposal: 'Will you let me fill your days with little blooms of love?',
                questions: [
                    'Which color rose matches your mood today?',
                    'Can I surprise you with a tiny bouquet and a big hug?',
                    'Will you accept a rose and my heart with it?'
                ],
                choices: [
                    'Blush pink roses',
                    'Sunny yellow roses',
                    'Classic red roses',
                    'A single white rose'
                ],
                letters: [
                    'Every petal feels like a soft thank you for the way you light up my days. If I could, I‚Äôd leave a rose on your pillow every morning and a kiss on your forehead every night.',
                    'I want our love to bloom gently, like a garden that grows brighter each day. You‚Äôre my favorite flower in every season.'
                ]
            },
            {
                month: 1,
                day: 8,
                title: 'Propose Day üíç',
                image: {
                    src: 'https://media.giphy.com/media/3o6ZsY8iVyjY7q1Bte/giphy.gif',
                    alt: 'A sparkling ring for a sweet proposal'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/3o6ZsYOZg9AQ3Z6xUk/giphy.gif',
                    alt: 'A sparkling yes moment with hearts'
                },
                loading: {
                    title: 'Setting up your forever question...',
                    icon: 'üíçüíñüíç',
                    petals: '‚ú®'
                },
                message: 'Today I‚Äôm brave enough to ask the sweetest question of all.',
                proposal: 'Will you be my forever yes, my favorite hello, and my best love story?',
                questions: [
                    'Can we turn every ‚Äúsomeday‚Äù into ‚Äúus‚Äù?',
                    'Will you say yes to slow dances, shared dreams, and silly smiles?',
                    'May I be the one who always chooses you?'
                ],
                choices: [
                    'A sunset walk proposal',
                    'A cozy candlelit question',
                    'A note tucked in a book',
                    'A promise whispered softly'
                ],
                letters: [
                    'I‚Äôm not asking for perfection, just a lifetime of real love. The kind that shows up, holds on, and keeps choosing each other every day.',
                    'I want to build a life where we celebrate little wins, hold each other on hard days, and never stop being best friends.'
                ]
            },
            {
                month: 1,
                day: 9,
                title: 'Chocolate Day üç´',
                image: {
                    src: 'https://media.giphy.com/media/3o6ZsV4RBs7JjYq3lu/giphy.gif',
                    alt: 'Delicious chocolates for a sweet day'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/l0MYy7QpDDVGVfAAw/giphy.gif',
                    alt: 'Chocolate treats raining down in celebration'
                },
                loading: {
                    title: 'Unwrapping your sweet surprise...',
                    icon: 'üç´üíûüç´',
                    petals: 'üç´'
                },
                message: 'Life is sweeter with you, so let‚Äôs share every bite and every laugh.',
                proposal: 'Can I be the one who brings your favorite treats and warm hugs?',
                questions: [
                    'Which chocolate should we share first: dark, milk, or all of them?',
                    'Can I be the sweet surprise in your day?',
                    'Will you save the last bite for me?'
                ],
                choices: [
                    'Caramel truffle',
                    'Hazelnut praline',
                    'Dark chocolate sea salt',
                    'Strawberry cream'
                ],
                letters: [
                    'Love feels like melting chocolate on a rainy afternoon‚Äîwarm, sweet, and wrapped in comfort. I want to be that for you.',
                    'Let‚Äôs make every day a little sweeter, with shared treats, soft laughter, and all the joy in between.'
                ]
            },
            {
                month: 1,
                day: 10,
                title: 'Teddy Day üß∏',
                image: {
                    src: 'https://media.giphy.com/media/11sBLVxNs7v6WA/giphy.gif',
                    alt: 'A cuddly teddy bear waving hello'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif',
                    alt: 'A bear hug celebration'
                },
                loading: {
                    title: 'Fluffing your teddy cuddles...',
                    icon: 'üß∏üíùüß∏',
                    petals: 'üíó'
                },
                message: 'Here‚Äôs a teddy bear to remind you you‚Äôre always safe and adored.',
                proposal: 'Will you be my cozy cuddle buddy for every season of love?',
                questions: [
                    'Should our teddy be named Snuggle or Honey?',
                    'Can I be your safe place after a long day?',
                    'Will you let me keep you wrapped in warmth?'
                ],
                choices: [
                    'Snuggle bear',
                    'Honey bear',
                    'Moonlight bear',
                    'Heart hug bear'
                ],
                letters: [
                    'If love had a shape, it would be soft and cuddly. I want to be your comfort, your warmth, and your favorite place to rest.',
                    'Whenever you need a safe place, I‚Äôll be your gentle hug, your cozy corner, and your calm.'
                ]
            },
            {
                month: 1,
                day: 11,
                title: 'Promise Day ü§û',
                image: {
                    src: 'https://media.giphy.com/media/3oz8xIsloV7zOmt81G/giphy.gif',
                    alt: 'Pinky promise with floating hearts'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/26gscJ77E1YX4uQ8w/giphy.gif',
                    alt: 'Hands linked in a promise'
                },
                loading: {
                    title: 'Sealing your promise moment...',
                    icon: 'ü§ûüí´ü§û',
                    petals: 'üí´'
                },
                message: 'I promise to choose you, respect you, and care for you every day.',
                proposal: 'Will you let me keep a forever promise by your side?',
                questions: [
                    'Can I promise to listen, laugh, and love you better every day?',
                    'Will you hold my hand through every season?',
                    'Can we promise to make each other feel safe and seen?'
                ],
                choices: [
                    'Always be honest',
                    'Always be kind',
                    'Always show up',
                    'Always choose you'
                ],
                letters: [
                    'My promise is simple: I will love you in ways that feel steady and true. I‚Äôll be there, with patience, kindness, and a heart that keeps choosing you.',
                    'I promise to hold your heart gently, celebrate your wins, and stand by you when the world feels loud.'
                ]
            },
            {
                month: 1,
                day: 12,
                title: 'Hug Day ü§ó',
                image: {
                    src: 'https://media.giphy.com/media/3M4NpbLCTxBqU/giphy.gif',
                    alt: 'A warm hug with happy hearts'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/1gV1Y0gV5bE1O/giphy.gif',
                    alt: 'A cozy hug celebration'
                },
                loading: {
                    title: 'Wrapping you in hugs...',
                    icon: 'ü§óüíóü§ó',
                    petals: 'üíû'
                },
                message: 'Let every hug remind you that you‚Äôre cherished, safe, and adored.',
                proposal: 'Can I be the arms you run into whenever you need comfort?',
                questions: [
                    'How many hugs should I owe you today‚Äî10 or 100?',
                    'Can I be the squeeze that turns your day around?',
                    'Will you let me hold you close when words fall short?'
                ],
                choices: [
                    'Morning sunshine hug',
                    'After-work unwind hug',
                    'Quiet midnight hug',
                    'Celebration hug'
                ],
                letters: [
                    'Hugs say what words can‚Äôt: ‚ÄúI‚Äôm here, I‚Äôve got you, and you‚Äôre never alone.‚Äù I hope you feel that in every embrace we share.',
                    'Whenever you‚Äôre tired, I want to hold you close and remind you that you‚Äôre deeply loved.'
                ]
            },
            {
                month: 1,
                day: 13,
                title: 'Kiss Day üíã',
                image: {
                    src: 'https://media.giphy.com/media/KztT2c4u8mYYUiMKdJ/giphy.gif',
                    alt: 'A sweet kiss with floating sparkles'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/3oz8xsaLjLVqVXr3tS/giphy.gif',
                    alt: 'A kiss blown with heart sparkles'
                },
                loading: {
                    title: 'Sending you a thousand kisses...',
                    icon: 'üíã‚ú®üíã',
                    petals: '‚ú®'
                },
                message: 'A kiss that says thank you, I love you, and I‚Äôm all yours.',
                proposal: 'Will you be the kiss that makes my heart flutter forever?',
                questions: [
                    'May I steal a sweet kiss and leave a thousand smiles?',
                    'Can I be your favorite hello and goodnight?',
                    'Will you let my kiss say ‚ÄúI love you‚Äù every time?'
                ],
                choices: [
                    'Forehead kiss',
                    'Cheek kiss',
                    'Hand kiss',
                    'Slow, sweet kiss'
                ],
                letters: [
                    'Every kiss is a tiny promise‚Äîsoft, sincere, and full of devotion. I hope mine always make you feel cherished and adored.',
                    'Let our kisses be little reminders that we belong to each other, today and always.'
                ]
            },
            {
                month: 1,
                day: 14,
                title: 'Valentine‚Äôs Day üíò',
                image: {
                    src: 'https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif',
                    alt: 'A heart bursting with Valentine cheer'
                },
                successImage: {
                    src: 'https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif',
                    alt: 'A heart bursting with Valentine cheer'
                },
                loading: {
                    title: 'Cueing the Valentine fireworks...',
                    icon: 'üíòüéâüíò',
                    petals: 'üíñ'
                },
                message: 'Today I celebrate you, us, and every day that led here.',
                proposal: 'Will you be my Valentine today, tomorrow, and always?',
                questions: [
                    'Will you be my forever Valentine?',
                    'Can we write a love story that‚Äôs gentle and brave?',
                    'Will you be my today, my tomorrow, and my always?'
                ],
                choices: [
                    'A candlelit dinner',
                    'A stargazing date',
                    'A handwritten letter',
                    'A slow dance at home'
                ],
                letters: [
                    'Valentine‚Äôs Day is just one day, but loving you is my favorite everyday. Thank you for being my calm, my joy, and my home.',
                    'I want to keep choosing you, celebrating you, and loving you in all the small and beautiful ways.'
                ]
            }
        ];

        const getTodayKey = () => {
            const now = new Date();
            return { month: now.getMonth(), day: now.getDate() };
        };

        const buildPreviousDays = (currentIndex) => {
            const previousDays = valentineWeek.slice(0, currentIndex).map((entry) => `
                <li><strong>${entry.title}:</strong> ${entry.proposal}</li>
            `).join('');

            return `
                <p>Here‚Äôs a replay of every love note that led to today:</p>
                <ul>${previousDays}</ul>
            `;
        };

        const todayKey = getTodayKey();
        const todayIndex = valentineWeek.findIndex(
            (entry) => entry.month === todayKey.month && entry.day === todayKey.day
        );

        const defaultDay = {
            title: 'Everyday Love ‚ú®',
            image: {
                src: 'https://media.giphy.com/media/VQRPENY0Tm2puBhvYz/giphy.gif',
                alt: 'A cozy love scene for any day'
            },
            successImage: {
                src: 'https://media.giphy.com/media/3oriO6qJiXajN0TyDu/giphy.gif',
                alt: 'A cheerful celebration for an everyday yes'
            },
            loading: {
                title: 'Getting your love dashboard ready...',
                icon: 'üíñ‚ú®üíñ',
                petals: 'üíó'
            },
            message: 'Even outside Valentine‚Äôs week, I‚Äôm still choosing you with my whole heart.',
            proposal: 'Will you keep this love story close until next Valentine‚Äôs Day?',
            questions: [
                'Can we plan a tiny date just for us?',
                'Which song reminds you of us right now?',
                'Can I send you a sweet message today?'
            ],
            choices: [
                'A cozy coffee date',
                'A sunset walk',
                'A movie night',
                'A handwritten note'
            ],
            letters: [
                'No special day is required for loving you. I want to keep showing up in all the small ways that make your heart feel safe and treasured.',
                'Until Valentine‚Äôs week arrives again, let‚Äôs keep building our love with laughter, patience, and gentle moments.'
            ]
        };

        let activeTab = 'questions';
        let selectedChoiceIndex = null;
        let letterIndex = 0;
        let isLetterOpen = false;

        const getTodayEntry = () => (todayIndex === -1 ? defaultDay : valentineWeek[todayIndex]);

        const renderTabContent = () => {
            const todayEntry = getTodayEntry();

            if (activeTab === 'questions') {
                pageBody.innerHTML = `
                    <ul class="question-list">
                        ${todayEntry.questions.map((question) => `<li>${question}</li>`).join('')}
                    </ul>
                `;
            }

            if (activeTab === 'choices') {
                pageBody.innerHTML = `
                    <div class="choice-grid">
                        ${todayEntry.choices.map((choice, index) => `
                            <button class="choice-button ${selectedChoiceIndex === index ? 'selected' : ''}" type="button" data-choice="${index}">
                                ${choice}
                            </button>
                        `).join('')}
                    </div>
                    <p>${selectedChoiceIndex === null ? 'Pick a little love surprise.' : `You chose: ${todayEntry.choices[selectedChoiceIndex]} üíñ`}</p>
                `;

                pageBody.querySelectorAll('.choice-button').forEach((button) => {
                    button.addEventListener('click', () => {
                        selectedChoiceIndex = Number(button.dataset.choice);
                        renderTabContent();
                    });
                });
            }

            pageContent.classList.remove('animate');
            void pageContent.offsetWidth;
            pageContent.classList.add('animate');
        };

        const renderTabs = () => {
            const tabs = [
                { id: 'questions', label: 'Questions üí¨' },
                { id: 'choices', label: 'Choices üéÄ' }
            ];

            contentTabs.innerHTML = tabs.map((tab) => `
                <button class="content-tab ${activeTab === tab.id ? 'active' : ''}" data-tab="${tab.id}" type="button">
                    ${tab.label}
                </button>
            `).join('');

            contentTabs.querySelectorAll('.content-tab').forEach((tab) => {
                tab.addEventListener('click', () => {
                    activeTab = tab.dataset.tab;
                    renderTabs();
                    renderTabContent();
                });
            });
        };

        const updateDayContent = () => {
            const todayEntry = getTodayEntry();
            const isValentineToday = todayIndex === valentineWeek.length - 1;
            const displayImage = document.getElementById('display-image');

            dayLabel.textContent = 'Today is';
            dayTitle.textContent = todayEntry.title;
            dayMessage.textContent = todayEntry.message;
            setImageWithFallback(
                displayImage,
                todayEntry.image?.src || defaultDay.image.src,
                todayEntry.image?.alt || defaultDay.image.alt,
                todayEntry.title
            );

            if (isValentineToday) {
                dayExtra.innerHTML = buildPreviousDays(valentineWeek.length - 1);
                dayReminder.textContent = 'Happy Valentine‚Äôs Day! Relive every sweet promise again. üíñ';
            } else {
                dayExtra.textContent = todayEntry.proposal;
                dayReminder.textContent = todayIndex === -1
                    ? 'Come back next Valentine‚Äôs Day for a brand-new wave of love. üíå'
                    : 'Come back tomorrow for a brand-new love surprise. üíû';
            }

            if (todayIndex === -1) {
                seasonNote.hidden = false;
                seasonNote.textContent = 'It‚Äôs not Valentine‚Äôs week yet‚Äîthis page is a little love preview just for you.';
            } else {
                seasonNote.hidden = true;
            }

            pageTitle.textContent = `${todayEntry.title} Love Page`;
            pageCount.textContent = todayIndex === -1 ? 'Love note for today' : 'Today‚Äôs page';
            todayBadge.textContent = 'Today‚Äôs pick üíñ';
            todayBadge.style.opacity = '1';

            renderTabs();
            renderTabContent();
        };

        updateDayContent();

        const buildLoadingMarkup = (todayEntry) => {
            const loading = todayEntry.loading || defaultDay.loading;
            const dayThemeLabel = todayEntry.title || 'Valentine‚Äôs Day';
            const petals = Array.from({ length: 8 }).map((_, index) => {
                const left = 10 + index * 10;
                const delay = (index * 0.2).toFixed(2);
                return `<span class="petal" style="left:${left}%; animation-delay:${delay}s;">${loading.petals}</span>`;
            }).join('');
            const buildLoadingDecoration = () => {
                if (todayEntry.title.includes('Rose Day')) {
                    return `
                        <div class="rose-display">
                            <div class="rose-bloom" aria-hidden="true">
                                <span>üíó</span><span>üåπ</span><span>üíó</span>
                                <span>üåπ</span><span>‚ù§Ô∏è</span><span>üåπ</span>
                                <span>üíó</span><span>üåπ</span><span>üíó</span>
                            </div>
                            <div class="rose-stem">üåø</div>
                        </div>
                    `;
                }

                if (todayEntry.title.includes('Propose Day')) {
                    return `
                        <div class="proposal-display">
                            <div class="proposal-ring" aria-hidden="true">üíç</div>
                            <div class="proposal-sparkles">‚ú® üíñ ‚ú®</div>
                        </div>
                    `;
                }

                if (todayEntry.title.includes('Hug Day')) {
                    return `
                        <div class="hug-display">
                            <div class="hug-cloud" aria-hidden="true">ü§óü§óü§ó</div>
                            <div class="hug-hearts">üíû üíó üíû</div>
                        </div>
                    `;
                }

                if (todayEntry.title.includes('Kiss Day')) {
                    return `
                        <div class="kiss-display">
                            <div class="kiss-lips" aria-hidden="true">üíã üíã üíã</div>
                            <div class="kiss-sparkles">‚ú® üíñ ‚ú®</div>
                        </div>
                    `;
                }

                if (todayEntry.title.includes('Valentine‚Äôs Day')) {
                    return `
                        <div class="valentine-display">
                            <div class="valentine-heart" aria-hidden="true">üíò</div>
                            <div class="valentine-fireworks">üéâ üíñ üéâ</div>
                        </div>
                    `;
                }

                return '';
            };

            const themedMarkup = buildLoadingDecoration();

            return `
                <div class="loading-screen">
                    <h2 class="loading-title">${loading.title}</h2>
                    <p class="loading-theme">Today‚Äôs theme: ${dayThemeLabel}</p>
                    <div class="loading-heart" aria-hidden="true">üíñ</div>
                    <div class="loading-icon">${loading.icon}</div>
                    <p class="loading-subtitle">Hold on, love is on the way...</p>
                    ${themedMarkup}
                    <div class="petal-field">
                        ${petals}
                    </div>
                </div>
            `;
        };

        const showInitialLoading = () => {
            const todayEntry = getTodayEntry();
            const overlay = document.createElement('div');
            overlay.className = 'initial-loading-overlay';
            overlay.innerHTML = buildLoadingMarkup(todayEntry);
            document.body.appendChild(overlay);

            setTimeout(() => {
                overlay.remove();
            }, 5000);
        };

        const renderLoadingPage = () => {
            container.innerHTML = `
                <div class="loading-screen">
                    <div class="loading-heart" aria-hidden="true">üíñ</div>
                    <p class="loading-subtitle">Loading your next page...</p>
                </div>
            `;

            setTimeout(renderQuestionPage, 2000);
        };

        showInitialLoading();

        const renderQuestionPage = () => {
            const todayEntry = getTodayEntry();
            container.innerHTML = `
                <div class="success-content">
                    <h2 class="success-title">${todayEntry.title} Questions üíû</h2>
                    <p class="success-subtitle">Answer just one, or let me know which feels the sweetest.</p>
                    <div class="success-questions">
                        <h3>Today‚Äôs love questions</h3>
                        <ul>
                            ${todayEntry.questions.map((question) => `<li>${question}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="success-message">
                        Your answers are my favorite love notes. I‚Äôm all ears and all heart.
                    </div>
                    <div class="success-actions">
                        <button class="choice-button" id="go-back" type="button">Go back</button>
                        <button class="choice-button selected" id="to-success" type="button">Next page ‚Üí</button>
                    </div>
                </div>
            `;

            document.getElementById('go-back').addEventListener('click', () => {
                window.location.reload();
            });

            document.getElementById('to-success').addEventListener('click', renderSuccessPage);
        };

        const renderSuccessPage = () => {
            const todayEntry = getTodayEntry();
            const successImage = todayEntry.successImage?.src || todayEntry.image?.src || defaultDay.successImage.src;
            const successAlt = todayEntry.successImage?.alt || todayEntry.image?.alt || defaultDay.successImage.alt;
            isLetterOpen = false;
            letterIndex = 0;

            container.innerHTML = `
                <div class="success-content">
                    <h2 class="success-title">Best decision ever üíñ</h2>
                    <p class="success-subtitle">You just made my whole day sparkle.</p>
                    <img src="${successImage}" alt="${successAlt}" style="border-radius: 14px; margin-bottom: 14px;">
                    <div class="success-message">
                        I‚Äôll keep choosing you in the little moments and the big ones. Thank you for saying yes to this love.
                    </div>
                    <div class="success-letters">
                        <h3>Love letters for today</h3>
                        <div class="letter-card">
                            <button class="letter-seal" id="success-open-letter" type="button" aria-expanded="false">
                                <span class="letter-icon">üíå</span>
                                <span class="letter-title">Click to open today‚Äôs love letter</span>
                                <span class="letter-subtitle">A sweet note is waiting inside.</span>
                            </button>
                            <div class="letter-content" hidden>
                                <div class="love-letter">${todayEntry.letters[letterIndex]}</div>
                                <div class="page-footer">
                                    <span>Letter ${letterIndex + 1} of ${todayEntry.letters.length}</span>
                                    <button class="choice-button" id="success-next-letter" type="button">Next letter ‚Üí</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="final-note">Now come collect your hugs, kisses, and a lifetime of dates.</p>
                </div>
            `;

            const successImg = container.querySelector('.success-content img');
            setImageWithFallback(
                successImg,
                successImage,
                successAlt,
                todayEntry.title
            );

            const openLetterButton = document.getElementById('success-open-letter');
            const letterTitle = openLetterButton.querySelector('.letter-title');
            const letterSubtitle = openLetterButton.querySelector('.letter-subtitle');
            const letterContent = container.querySelector('.letter-content');

            openLetterButton.addEventListener('click', () => {
                isLetterOpen = !isLetterOpen;
                openLetterButton.classList.toggle('opened', isLetterOpen);
                openLetterButton.setAttribute('aria-expanded', String(isLetterOpen));
                letterContent.hidden = !isLetterOpen;
                letterTitle.textContent = isLetterOpen
                    ? 'Click to close today‚Äôs love letter'
                    : 'Click to open today‚Äôs love letter';
                letterSubtitle.textContent = isLetterOpen
                    ? 'Keep it close, then tuck it back in.'
                    : 'A sweet note is waiting inside.';
            });

            const nextLetterButton = document.getElementById('success-next-letter');
            nextLetterButton.addEventListener('click', () => {
                letterIndex = (letterIndex + 1) % todayEntry.letters.length;
                container.querySelector('.love-letter').textContent = todayEntry.letters[letterIndex];
                container.querySelector('.page-footer span').textContent = `Letter ${letterIndex + 1} of ${todayEntry.letters.length}`;
            });

            document.getElementById('main-card').style.backgroundColor = 'transparent';
            document.getElementById('main-card').style.boxShadow = 'none';
        };

        // 1. Logic for the runaway "No" button
        const moveNoButton = () => {
            const padding = 16;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;
            const x = Math.max(padding, Math.random() * Math.max(maxX, padding));
            const y = Math.max(padding, Math.random() * Math.max(maxY, padding));

            noBtn.style.position = 'fixed';
            noBtn.style.left = `${x}px`;
            noBtn.style.top = `${y}px`;
        };

        const handleNoInteraction = (event) => {
            event.preventDefault();
            event.stopPropagation();
            moveNoButton();
        };

        noBtn.addEventListener('mouseover', moveNoButton);
        noBtn.addEventListener('touchstart', handleNoInteraction, { passive: false });
        noBtn.addEventListener('click', handleNoInteraction);

        const createBurst = () => {
            const burst = document.createElement('span');
            burst.classList.add('burst-heart');
            burst.textContent = 'üíñ';
            const angle = Math.random() * Math.PI * 2;
            const distance = 80 + Math.random() * 60;
            burst.style.setProperty('--x', `${Math.cos(angle) * distance}px`);
            burst.style.setProperty('--y', `${Math.sin(angle) * distance}px`);
            const rect = yesBtn.getBoundingClientRect();
            burst.style.left = `${rect.left + rect.width / 2}px`;
            burst.style.top = `${rect.top + rect.height / 2}px`;
            document.body.appendChild(burst);
            burst.addEventListener('animationend', () => burst.remove());
        };

        yesBtn.addEventListener('mouseenter', createBurst);

        // 2. Logic for the "Yes" click (loading ‚Üí question page ‚Üí success page)
        yesBtn.addEventListener('click', renderLoadingPage);
    </script>
</body>
</html>
